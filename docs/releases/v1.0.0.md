# wecom-cleaner v1.0.0

首个正式版本，聚焦“安全、可恢复、可审计”的企业微信本地缓存治理。

## 主要能力

- 年月清理（默认可执行删除，支持 dry-run）
- 会话分析（只读）
- 全量空间治理（分级策略）
- 回收区治理（保留策略 + dry-run）
- 批次恢复（覆盖/重命名/跳过）
- 系统自检 doctor（支持 `--json`）

## 本次重点改进

- 修复恢复 `dry-run` 分支潜在实删风险，预演不再改动源目录。
- 回收区治理增加批次路径边界校验，防止异常索引导致越界删除。
- doctor 改为只读体检：不创建目录、不触发自动修复下载。
- Zig 核心探针增加超时控制，避免异常阻塞。
- 外部存储根目录推断增强：`Documents/Profiles` 大小写不敏感。
- e2e smoke 清理逻辑加固，避免误删非安全路径。

## 质量与验证

- 单元测试：47/47 通过
- 覆盖率：statements 85.65%，branches 70.99%，functions 91.39%，lines 85.65%
- 全菜单 smoke：通过（含恢复冲突分支、doctor JSON 分支）

## 兼容性

- 当前正式支持：macOS（x64 / arm64）
- Windows 兼容在后续版本规划中
