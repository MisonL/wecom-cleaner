# v1.2.1 发布说明

发布日期：2026-02-26

## 亮点

- 发布流程新增一键门禁：`npm run release:gate`，统一覆盖格式检查、语法检查、覆盖率门禁、Shell 脚本静态检查、E2E smoke 与打包预演。
- 回收区治理安全性进一步增强：新增 `realpath` 级边界校验，拦截符号链接越界路径。
- Agent 无交互脚本失败语义加固：失败时稳定返回非 0 退出码并输出可读错误原因，避免自动化误判成功。

## 重要修复

- 修复回收区治理的符号链接逃逸风险（`recycle_path_symlink_escape` / `batch_root_symlink_escape` 等）。
- 修复 `recycle_maintain` 业务失败场景下无交互契约测试断言，确保“退出码 + JSON 输出”语义一致。
- 修复报告脚本在 `set -u` 下错误分支变量展开异常，避免失败被错误吞掉。

## 质量状态

- 发布门禁：全部通过。
- 单元测试：`91/91` 通过。
- 覆盖率（门禁）：
  - statements：`88.49%`
  - branches：`75.01%`
  - functions：`95.02%`
  - lines：`88.49%`

## 资产

- npm 包：`wecom-cleaner-1.2.1.tgz`
- GitHub Release 附件：
  - `wecom-cleaner-core-v1.2.1-darwin-x64`
  - `wecom-cleaner-core-v1.2.1-darwin-arm64`
  - `wecom-cleaner-core-v1.2.1-SHA256SUMS.txt`
