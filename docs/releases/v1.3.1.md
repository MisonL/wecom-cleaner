# v1.3.1

发布日期：2026-02-27

## 重点更新

- 新增无交互阶段协议 `--run-task`：
  - `preview`：仅预演
  - `execute`：仅执行
  - `preview-execute-verify`：预演 -> 执行 -> 复核
- 无交互 JSON 新增阶段产物：
  - `data.taskPhases`：阶段明细（状态、耗时、命中/成功/失败统计）
  - `data.taskCard`：用户视角任务卡片（范围、结论、分布）
- 新增扫描诊断参数 `--scan-debug off|summary|full`：用于定位“扫描命中与预期不一致”问题。

## CLI 与 Agent 协同

- `--help` 已补充 `--run-task` 与 `--scan-debug`。
- skills 文档与命令参考已同步：CLI 回退场景优先使用 `--run-task`，并读取 `taskCard/taskPhases`。

## 测试与质量

- 新增/更新：
  - `test/config.test.js`：新增 `--run-task` / `--scan-debug` 参数解析覆盖。
  - `test/cli-non-interactive.test.js`：新增阶段协议与扫描诊断覆盖。
- 全量测试通过：`npm test`（106/106）。

## 兼容性说明

- 旧的无交互调用方式保持兼容（不传 `--run-task` 时行为不变）。
- 文本输出保持原有动作卡片，新增阶段流程区块仅在 `--run-task` 时显示。
