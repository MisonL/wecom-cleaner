# wecom-cleaner v1.1.0

本版本重点是：Agent 可安装技能能力正式内置、无交互调用链路更稳定、发布与验证流程完整收口。

## 新增能力

- 内置 Agent 技能：`skills/wecom-cleaner-agent`
  - 包含 `SKILL.md`、`agents/openai.yaml`、`references/commands.md`
- 新增技能安装命令：`wecom-cleaner-skill install`
  - 支持 `--target`、`--force`、`--dry-run`
- 新增 GitHub 一键安装脚本：`scripts/install-skill.sh`

## 关键改进

- 无交互协议正式化并文档化：`docs/NON_INTERACTIVE_SPEC.md`
- 启动行为统一：无参数进交互、带参数走无交互
- 无交互默认 JSON 输出，兼容 `--json`，并提示 `--mode` 迁移
- Zig 核心版本统一到 `1.1.0`，manifest 与下载基地址同步到 `v1.1.0`

## 修复与安全

- 修复恢复 `dry-run + overwrite` 分支潜在实删问题
- 修复回收区治理异常批次路径可能越界的问题
- `scripts/install-skill.sh` 兼容 `--target` 指向不存在父目录
- 强化路径白名单 + `realpath` 边界防护与审计落盘

## 质量与验证

- 单元测试：`68/68` 通过
- 覆盖率：`statements 86.57%`，`branches 73.96%`，`functions 93.25%`，`lines 86.57%`
- 全菜单 smoke：通过（含恢复冲突分支、doctor JSON、设置菜单）

## 兼容性

- 当前正式支持：macOS（x64 / arm64）
- Windows 兼容仍在后续版本规划中
